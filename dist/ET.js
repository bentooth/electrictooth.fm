!function(t){function n(l){if(e[l])return e[l].exports;var c=e[l]={i:l,l:!1,exports:{}};return t[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,l){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:l})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)n.d(l,c,function(n){return t[n]}.bind(null,c));return l},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(module,exports){eval('function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar ETAudioPlayer = /*#__PURE__*/function () {\n  function ETAudioPlayer() {\n    var _this = this;\n\n    _classCallCheck(this, ETAudioPlayer);\n\n    _defineProperty(this, "handleSpace", function (e) {\n      if (e.code === \'Space\') {\n        _this.play();\n      }\n    });\n\n    _defineProperty(this, "mouseDown", function () {\n      _this.moving = true;\n      document.addEventListener(\'mousemove\', _this.moveplayhead, true);\n\n      _this.audio.removeEventListener(\'timeupdate\', _this.timeUpdate, false);\n    });\n\n    _defineProperty(this, "moveplayhead", function (e) {\n      var shiftX = e.clientX - _this.DesktopProgressBarTrack.getBoundingClientRect().left;\n\n      var newButtonPosition = 100 * (shiftX / _this.DesktopProgressBarTrack.offsetWidth);\n      var newProgressBarPosition = newButtonPosition - 100;\n\n      if (newButtonPosition > 100) {\n        _this.DesktopProgressBarButton.style.left = "".concat(100, "%");\n        _this.DesktopProgressBar.style.transform = "translateX(".concat(0, "%)");\n        return;\n      }\n\n      if (newButtonPosition < 0) {\n        _this.DesktopProgressBarButton.style.left = "".concat(0, "%");\n        _this.DesktopProgressBar.style.transform = "translateX(".concat(-100, "%)");\n        return;\n      }\n\n      _this.DesktopProgressBarButton.style.left = "".concat(newButtonPosition, "%");\n      _this.DesktopProgressBar.style.transform = "translateX(".concat(newProgressBarPosition, "%)");\n      return;\n    });\n\n    _defineProperty(this, "mouseUp", function (e) {\n      if (_this.moving) {\n        _this.moveplayhead(e);\n\n        document.removeEventListener(\'mousemove\', _this.moveplayhead, true);\n        var buttonPositionInPercent = _this.DesktopProgressBarButton.style.left;\n        var percentDeci = buttonPositionInPercent.substring(0, buttonPositionInPercent.length - 1);\n        percentDeci = percentDeci / 100;\n        var newCurrentTime = _this.currentSong.duration * percentDeci;\n        newCurrentTime = newCurrentTime.toFixed(0);\n        newCurrentTime = newCurrentTime / 1000;\n        _this.audio.currentTime = newCurrentTime;\n\n        _this.audio.addEventListener(\'timeupdate\', _this.timeUpdate, false);\n      }\n\n      _this.moving = false;\n    });\n\n    _defineProperty(this, "touchplayhead", function (e) {\n      _this.audio.removeEventListener(\'timeupdate\', _this.timeUpdate, false);\n\n      var newClient;\n\n      if (e.touches[0].clientX) {\n        newClient = e.touches[0].clientX - _this.progressBarTrack.getBoundingClientRect().left;\n      }\n\n      if (e.clientX) {\n        newClient = e.clientX - _this.progressBarTrack.getBoundingClientRect().left;\n      }\n\n      var newbutton = 100 * (newClient / _this.progressBarTrack.offsetWidth);\n      var newprogress = newbutton - 100;\n\n      if (newbutton > 100) {\n        _this.progressBarButton.style.left = "".concat(100, "%");\n        _this.progressBar.style.transform = "translateX(".concat(0, "%)");\n        _this.miniProgressBar.style.transform = "translateX(".concat(0, "%)");\n        return;\n      }\n\n      if (newbutton < 0) {\n        _this.progressBarButton.style.left = "".concat(0, "%");\n        _this.progressBar.style.transform = "translateX(".concat(-100, "%)");\n        _this.miniProgressBar.style.transform = "translateX(".concat(-100, "%)");\n        return;\n      }\n\n      _this.progressBarButton.style.left = "".concat(newbutton, "%");\n      _this.progressBar.style.transform = "translateX(".concat(newprogress, "%)");\n      _this.miniProgressBar.style.transform = "translateX(".concat(newprogress, "%)");\n      return;\n    });\n\n    _defineProperty(this, "timeUpdate", function () {\n      var buttonPercent = 100000 * (_this.audio.currentTime / _this.currentSong.duration);\n      var trackPercent = buttonPercent - 100;\n      _this.progressBarButton.style.left = "".concat(buttonPercent, "%");\n      _this.progressBar.style.transform = "translateX(".concat(trackPercent, "%)");\n      _this.DesktopProgressBarButton.style.left = "".concat(buttonPercent, "%");\n      _this.DesktopProgressBar.style.transform = "translateX(".concat(trackPercent, "%)");\n      _this.miniProgressBar.style.transform = "translateX(".concat(trackPercent, "%)");\n    });\n\n    _defineProperty(this, "endTouch", function () {\n      var buttonPositionInPercent = _this.progressBarButton.style.left;\n      var percentDeci = buttonPositionInPercent.substring(0, buttonPositionInPercent.length - 1);\n      percentDeci = percentDeci / 100;\n      var newCurrentTime = _this.currentSong.duration * percentDeci;\n      newCurrentTime = newCurrentTime.toFixed(0);\n      newCurrentTime = newCurrentTime / 1000;\n      _this.audio.currentTime = newCurrentTime;\n\n      _this.audio.addEventListener(\'timeupdate\', _this.timeUpdate, false);\n    });\n\n    _defineProperty(this, "setVolume", function (e) {\n      _this.audio.volume = e.target.value / 100;\n    });\n\n    this.playlist = [];\n    this.fullMobilePlayerShow = false;\n    this.fullMobileListShow = false;\n    this.currentSong = {};\n    this.previousSongId = -1;\n    this.playing = false;\n    this.loading = false;\n    this.moving = false;\n    this.audio = document.getElementById(\'audio-ele\');\n    this.playerTitle = document.getElementsByClassName(\'player-title\');\n    this.playerSinger = document.getElementsByClassName(\'player-singer\');\n    this.playerCover = document.getElementsByClassName(\'fmp-img\');\n    this.volumeContol = document.getElementById(\'vol-control\');\n    this.fullPlayer = document.getElementById(\'fmp\');\n    this.fullPlaylistPanel = document.getElementById(\'fml\');\n    this.progressBarTrack = document.getElementById(\'progress-bar__track\');\n    this.progressBar = document.getElementById(\'progress-bar__progress\');\n    this.progressBarButton = document.getElementById(\'progress-bar__button\');\n    this.DesktopProgressBarTrack = document.getElementById(\'desktop-player__progress-bar_track\');\n    this.DesktopProgressBar = document.getElementById(\'desktop-player__progress-bar_progress\');\n    this.DesktopProgressBarButton = document.getElementById(\'desktop-player__progress-bar_button\');\n    this.playButtons = document.getElementsByClassName(\'play-icon\');\n    this.miniPlayer = document.getElementById(\'smp\');\n    this.miniProgressBarTrack = document.getElementById(\'mini-progress-bar__track\');\n    this.miniProgressBar = document.getElementById(\'mini-progress-bar__progress\');\n    this.initializeSC();\n    this.loadPlaylistFromSC();\n    this.initProgressBars();\n    this.setEventListeners();\n  }\n\n  _createClass(ETAudioPlayer, [{\n    key: "initializeSC",\n    value: function initializeSC() {\n      SC.initialize({\n        client_id: \'qar87rq7vEGGfgjM0PqrmTBUYhSzUcQ5\',\n        redirect_uri: \'https://example.com/callback\'\n      });\n    }\n  }, {\n    key: "loadPlaylistFromSC",\n    value: function loadPlaylistFromSC() {\n      var _this2 = this;\n\n      SC.get("playlists/1064225653").then(function (_ref) {\n        var tracks = _ref.tracks;\n        tracks.forEach(function (song, i) {\n          _this2.playlist.push({\n            id: i,\n            title: song.title,\n            singer: \'\',\n            cover: song.artwork_url.replace(\'large\', \'t500x500\'),\n            musicSrc: "".concat(song.stream_url, "?client_id=qar87rq7vEGGfgjM0PqrmTBUYhSzUcQ5"),\n            duration: song.duration\n          });\n        });\n\n        _this2.initPlayer();\n      });\n    }\n  }, {\n    key: "initPlayer",\n    value: function initPlayer() {\n      this.updatePlayer(this.playlist[0]);\n      this.updatePlaylistPanel();\n      this.updatePanel();\n    }\n  }, {\n    key: "initProgressBars",\n    value: function initProgressBars() {\n      this.progressBar.style.transform = "translateX(".concat(-100, "%)");\n      this.miniProgressBar.style.transform = "translateX(".concat(-100, "%)");\n      this.DesktopProgressBar.style.transform = "translateX(".concat(-100, "%)");\n    }\n  }, {\n    key: "setEventListeners",\n    value: function setEventListeners() {\n      var _this3 = this;\n\n      this.audio.addEventListener(\'timeupdate\', this.timeUpdate, false);\n      this.audio.addEventListener(\'ended\', function () {\n        return _this3.next();\n      });\n      this.volumeContol.addEventListener(\'change\', function (e) {\n        return _this3.setVolume(e);\n      });\n      this.volumeContol.addEventListener(\'input\', function (e) {\n        return _this3.setVolume(e);\n      }); //mobile\n\n      this.progressBarButton.addEventListener(\'touchstart\', function (e) {\n        return _this3.touchplayhead(e);\n      }, {\n        passive: true\n      });\n      this.progressBarButton.addEventListener(\'touchmove\', function (e) {\n        return _this3.touchplayhead(e);\n      }, {\n        passive: true\n      });\n      this.progressBarButton.addEventListener(\'touchend\', function (e) {\n        return _this3.endTouch(e);\n      });\n      this.progressBarTrack.addEventListener(\'touchstart\', function (e) {\n        return _this3.touchplayhead(e);\n      }, {\n        passive: true\n      });\n      this.progressBarTrack.addEventListener(\'touchmove\', function (e) {\n        return _this3.touchplayhead(e);\n      }, {\n        passive: true\n      });\n      this.progressBarTrack.addEventListener(\'touchend\', function (e) {\n        return _this3.endTouch(e);\n      }); //desktop\n\n      this.DesktopProgressBarTrack.addEventListener(\'mousedown\', this.mouseDown);\n      this.DesktopProgressBarTrack.addEventListener(\'mouseup\', function (e) {\n        return _this3.mouseUp(e);\n      });\n      this.DesktopProgressBarButton.addEventListener(\'mousedown\', this.mouseDown);\n      document.addEventListener(\'mouseup\', this.mouseUp);\n      document.addEventListener(\'keypress\', function (e) {\n        return _this3.handleSpace(e);\n      });\n    }\n  }, {\n    key: "play",\n    value: function play() {\n      if (this.playing) {\n        this.playing = false;\n        this.audio.pause();\n        this.showPlay();\n      } else {\n        this.playing = true;\n        this.audio.play();\n        this.showPause();\n        this.updatePanel();\n      }\n    }\n  }, {\n    key: "updatePanel",\n    value: function updatePanel() {\n      if (this.currentSong.id !== this.previousSongId) {\n        var current = document.getElementById(this.currentSong.id);\n        current.style.fontWeight = \'bold\';\n        current.style.color = \'#05aea5\';\n        var previous = document.getElementById(this.previousSongId);\n\n        if (previous) {\n          previous.style.fontWeight = \'normal\';\n          previous.style.color = \'black\';\n        }\n      }\n    }\n  }, {\n    key: "updatePlayer",\n    value: function updatePlayer(newSong) {\n      this.audio.src = newSong.musicSrc;\n\n      var _iterator = _createForOfIteratorHelper(this.playerTitle),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var e = _step.value;\n          e.innerHTML = newSong.title;\n        } // for (let s of this.playerSinger) {\n        //   s.innerHTML = newSong.singer;\n        // }\n\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(this.playerCover),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var i = _step2.value;\n          i.src = newSong.cover;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      this.currentSong = newSong;\n    }\n  }, {\n    key: "updatePlaylistPanel",\n    value: function updatePlaylistPanel() {\n      var temp, item, a, i;\n      var plist = document.getElementById(\'mp\');\n      temp = document.getElementsByTagName(\'template\')[0];\n      item = temp.content.querySelector(\'div\');\n\n      for (i = 0; i < this.playlist.length; i++) {\n        //Create a new node, based on the template:\n        a = document.importNode(item, true);\n        a.id = i;\n        a.setAttribute(\'onclick\', "ETPlayer.playNow(".concat(this.playlist[i].id, ")"));\n        var playlistImg = a.querySelector(\'img\');\n        playlistImg.src = this.playlist[i].cover;\n        var playlistTitle = a.querySelector(\'p\');\n        playlistTitle.innerHTML = "".concat(this.playlist[i].title);\n        plist.appendChild(a);\n      }\n    }\n  }, {\n    key: "showPause",\n    value: function showPause() {\n      var _iterator3 = _createForOfIteratorHelper(this.playButtons),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var b = _step3.value;\n          b.classList.remove(\'fa-play\');\n          b.classList.add(\'fa-pause\');\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: "showPlay",\n    value: function showPlay() {\n      var _iterator4 = _createForOfIteratorHelper(this.playButtons),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var b = _step4.value;\n          b.classList.remove(\'fa-pause\');\n          b.classList.add(\'fa-play\');\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: "playNow",\n    value: function playNow(id) {\n      this.previousSongId = this.currentSong.id;\n      this.updatePlayer(this.playlist[id]);\n      this.updatePanel();\n      this.showPause();\n      this.audio.play();\n      this.playing = true;\n    }\n  }, {\n    key: "next",\n    value: function next() {\n      this.previousSongId = this.currentSong.id;\n      var next = this.currentSong.id + 1;\n\n      if (this.playlist.length === next) {\n        next = 0;\n      }\n\n      this.updatePlayer(this.playlist[next]);\n      this.updatePanel();\n      this.showPause();\n      this.audio.play();\n      this.playing = true;\n    }\n  }, {\n    key: "prev",\n    value: function prev() {\n      this.previousSongId = this.currentSong.id;\n      var prev = this.currentSong.id - 1;\n\n      if (prev < 0) {\n        prev = this.playlist.length - 1;\n      }\n\n      this.updatePlayer(this.playlist[prev]);\n      this.updatePanel();\n      this.showPause();\n      this.audio.play();\n      this.playing = true;\n    }\n  }, {\n    key: "toggleMobileList",\n    value: function toggleMobileList() {\n      if (this.fullMobileListShow) {\n        history.pushState(null, \'\', \'/index.html#player\');\n        this.fullPlaylistPanel.style.transform = \'translateY(100vh)\';\n        this.fullMobileListShow = !this.fullMobileListShow;\n      } else {\n        history.pushState(null, \'\', \'/index.html#playlist\');\n        this.fullPlaylistPanel.style.transform = \'translateY(0)\';\n        this.fullMobileListShow = !this.fullMobileListShow;\n      }\n    }\n  }, {\n    key: "toggleMobilePlayer",\n    value: function toggleMobilePlayer() {\n      if (this.fullMobilePlayerShow) {\n        history.pushState(null, \'\', \'/index.html\');\n        this.miniPlayer.style.transitionDelay = \'350ms\';\n        this.miniPlayer.style.transform = \'translateY(0)\';\n        this.fullPlayer.style.transform = \'translateY(200vh)\';\n        this.fullMobilePlayerShow = !this.fullMobilePlayerShow;\n      } else {\n        history.pushState(null, \'\', \'/index.html#player\');\n        this.miniPlayer.style.transitionDelay = \'0ms\';\n        this.miniPlayer.style.transform = \'translateY(160px)\';\n        this.fullPlayer.style.transform = \'translateY(0)\';\n        this.fullMobilePlayerShow = !this.fullMobilePlayerShow;\n      }\n    }\n  }]);\n\n  return ETAudioPlayer;\n}();\n\nvar ETPlayer = new ETAudioPlayer();\n\nwindow.onload = function () {\n  ETPlayer.miniPlayer.style.transform = \'translateY(0)\';\n  history.pushState(null, \'\', \'/index.html\');\n};\n\nwindow.onpopstate = function () {\n  if (ETPlayer.fullMobileListShow && ETPlayer.fullMobilePlayerShow) {\n    ETPlayer.toggleMobileList();\n    return;\n  }\n\n  if (!ETPlayer.fullMobileListShow && ETPlayer.fullMobilePlayerShow) {\n    ETPlayer.toggleMobilePlayer();\n    return;\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3B1YmxpYy9FVC5qcz9jMjRkIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEVUQXVkaW9QbGF5ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnBsYXlsaXN0ID0gW107XG4gICAgdGhpcy5mdWxsTW9iaWxlUGxheWVyU2hvdyA9IGZhbHNlO1xuICAgIHRoaXMuZnVsbE1vYmlsZUxpc3RTaG93ID0gZmFsc2U7XG4gICAgdGhpcy5jdXJyZW50U29uZyA9IHt9O1xuICAgIHRoaXMucHJldmlvdXNTb25nSWQgPSAtMTtcbiAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLm1vdmluZyA9IGZhbHNlO1xuXG4gICAgdGhpcy5hdWRpbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpby1lbGUnKTtcbiAgICB0aGlzLnBsYXllclRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGxheWVyLXRpdGxlJyk7XG4gICAgdGhpcy5wbGF5ZXJTaW5nZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwbGF5ZXItc2luZ2VyJyk7XG4gICAgdGhpcy5wbGF5ZXJDb3ZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2ZtcC1pbWcnKTtcblxuICAgIHRoaXMudm9sdW1lQ29udG9sID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZvbC1jb250cm9sJyk7XG5cbiAgICB0aGlzLmZ1bGxQbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm1wJyk7XG4gICAgdGhpcy5mdWxsUGxheWxpc3RQYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbWwnKTtcblxuICAgIHRoaXMucHJvZ3Jlc3NCYXJUcmFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1iYXJfX3RyYWNrJyk7XG4gICAgdGhpcy5wcm9ncmVzc0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1iYXJfX3Byb2dyZXNzJyk7XG4gICAgdGhpcy5wcm9ncmVzc0JhckJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1iYXJfX2J1dHRvbicpO1xuXG4gICAgdGhpcy5EZXNrdG9wUHJvZ3Jlc3NCYXJUcmFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgJ2Rlc2t0b3AtcGxheWVyX19wcm9ncmVzcy1iYXJfdHJhY2snLFxuICAgICk7XG4gICAgdGhpcy5EZXNrdG9wUHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICdkZXNrdG9wLXBsYXllcl9fcHJvZ3Jlc3MtYmFyX3Byb2dyZXNzJyxcbiAgICApO1xuICAgIHRoaXMuRGVza3RvcFByb2dyZXNzQmFyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAnZGVza3RvcC1wbGF5ZXJfX3Byb2dyZXNzLWJhcl9idXR0b24nLFxuICAgICk7XG5cbiAgICB0aGlzLnBsYXlCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGxheS1pY29uJyk7XG5cbiAgICB0aGlzLm1pbmlQbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc21wJyk7XG4gICAgdGhpcy5taW5pUHJvZ3Jlc3NCYXJUcmFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgJ21pbmktcHJvZ3Jlc3MtYmFyX190cmFjaycsXG4gICAgKTtcbiAgICB0aGlzLm1pbmlQcm9ncmVzc0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgJ21pbmktcHJvZ3Jlc3MtYmFyX19wcm9ncmVzcycsXG4gICAgKTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZVNDKCk7XG4gICAgdGhpcy5sb2FkUGxheWxpc3RGcm9tU0MoKTtcbiAgICB0aGlzLmluaXRQcm9ncmVzc0JhcnMoKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBpbml0aWFsaXplU0MoKSB7XG4gICAgU0MuaW5pdGlhbGl6ZSh7XG4gICAgICBjbGllbnRfaWQ6ICdxYXI4N3JxN3ZFR0dmZ2pNMFBxcm1UQlVZaFN6VWNRNScsXG4gICAgICByZWRpcmVjdF91cmk6ICdodHRwczovL2V4YW1wbGUuY29tL2NhbGxiYWNrJyxcbiAgICB9KTtcbiAgfVxuXG4gIGxvYWRQbGF5bGlzdEZyb21TQygpIHtcbiAgICBTQy5nZXQoYHBsYXlsaXN0cy8xMDY0MjI1NjUzYCkudGhlbigoeyB0cmFja3MgfSkgPT4ge1xuICAgICAgdHJhY2tzLmZvckVhY2goKHNvbmcsIGkpID0+IHtcbiAgICAgICAgdGhpcy5wbGF5bGlzdC5wdXNoKHtcbiAgICAgICAgICBpZDogaSxcbiAgICAgICAgICB0aXRsZTogc29uZy50aXRsZSxcbiAgICAgICAgICBzaW5nZXI6ICcnLFxuICAgICAgICAgIGNvdmVyOiBzb25nLmFydHdvcmtfdXJsLnJlcGxhY2UoJ2xhcmdlJywgJ3Q1MDB4NTAwJyksXG4gICAgICAgICAgbXVzaWNTcmM6IGAke3Nvbmcuc3RyZWFtX3VybH0/Y2xpZW50X2lkPXFhcjg3cnE3dkVHR2Znak0wUHFybVRCVVloU3pVY1E1YCxcbiAgICAgICAgICBkdXJhdGlvbjogc29uZy5kdXJhdGlvbixcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuaW5pdFBsYXllcigpO1xuICAgIH0pO1xuICB9XG5cbiAgaW5pdFBsYXllcigpIHtcbiAgICB0aGlzLnVwZGF0ZVBsYXllcih0aGlzLnBsYXlsaXN0WzBdKTtcbiAgICB0aGlzLnVwZGF0ZVBsYXlsaXN0UGFuZWwoKTtcbiAgICB0aGlzLnVwZGF0ZVBhbmVsKCk7XG4gIH1cblxuICBpbml0UHJvZ3Jlc3NCYXJzKCkge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHstMTAwfSUpYDtcbiAgICB0aGlzLm1pbmlQcm9ncmVzc0Jhci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgkey0xMDB9JSlgO1xuICAgIHRoaXMuRGVza3RvcFByb2dyZXNzQmFyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7LTEwMH0lKWA7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCB0aGlzLnRpbWVVcGRhdGUsIGZhbHNlKTtcbiAgICB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4gdGhpcy5uZXh0KCkpO1xuXG4gICAgdGhpcy52b2x1bWVDb250b2wuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHRoaXMuc2V0Vm9sdW1lKGUpKTtcbiAgICB0aGlzLnZvbHVtZUNvbnRvbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB0aGlzLnNldFZvbHVtZShlKSk7XG5cbiAgICAvL21vYmlsZVxuICAgIHRoaXMucHJvZ3Jlc3NCYXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICd0b3VjaHN0YXJ0JyxcbiAgICAgIChlKSA9PiB0aGlzLnRvdWNocGxheWhlYWQoZSksXG4gICAgICB7IHBhc3NpdmU6IHRydWUgfSxcbiAgICApO1xuICAgIHRoaXMucHJvZ3Jlc3NCYXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICd0b3VjaG1vdmUnLFxuICAgICAgKGUpID0+IHRoaXMudG91Y2hwbGF5aGVhZChlKSxcbiAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9LFxuICAgICk7XG4gICAgdGhpcy5wcm9ncmVzc0JhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIChlKSA9PlxuICAgICAgdGhpcy5lbmRUb3VjaChlKSxcbiAgICApO1xuXG4gICAgdGhpcy5wcm9ncmVzc0JhclRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAndG91Y2hzdGFydCcsXG4gICAgICAoZSkgPT4gdGhpcy50b3VjaHBsYXloZWFkKGUpLFxuICAgICAgeyBwYXNzaXZlOiB0cnVlIH0sXG4gICAgKTtcbiAgICB0aGlzLnByb2dyZXNzQmFyVHJhY2suYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICd0b3VjaG1vdmUnLFxuICAgICAgKGUpID0+IHRoaXMudG91Y2hwbGF5aGVhZChlKSxcbiAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9LFxuICAgICk7XG4gICAgdGhpcy5wcm9ncmVzc0JhclRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKGUpID0+IHRoaXMuZW5kVG91Y2goZSkpO1xuXG4gICAgLy9kZXNrdG9wXG5cbiAgICB0aGlzLkRlc2t0b3BQcm9ncmVzc0JhclRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duKTtcblxuICAgIHRoaXMuRGVza3RvcFByb2dyZXNzQmFyVHJhY2suYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChlKSA9PlxuICAgICAgdGhpcy5tb3VzZVVwKGUpLFxuICAgICk7XG4gICAgdGhpcy5EZXNrdG9wUHJvZ3Jlc3NCYXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd24pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMubW91c2VVcCk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB0aGlzLmhhbmRsZVNwYWNlKGUpKTtcbiAgfVxuXG4gIGhhbmRsZVNwYWNlID0gKGUpID0+IHtcbiAgICBpZiAoZS5jb2RlID09PSAnU3BhY2UnKSB7XG4gICAgICB0aGlzLnBsYXkoKTtcbiAgICB9XG4gIH07XG5cbiAgbW91c2VEb3duID0gKCkgPT4ge1xuICAgIHRoaXMubW92aW5nID0gdHJ1ZTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm1vdmVwbGF5aGVhZCwgdHJ1ZSk7XG4gICAgdGhpcy5hdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgdGhpcy50aW1lVXBkYXRlLCBmYWxzZSk7XG4gIH07XG5cbiAgbW92ZXBsYXloZWFkID0gKGUpID0+IHtcbiAgICBsZXQgc2hpZnRYID1cbiAgICAgIGUuY2xpZW50WCAtIHRoaXMuRGVza3RvcFByb2dyZXNzQmFyVHJhY2suZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcblxuICAgIGxldCBuZXdCdXR0b25Qb3NpdGlvbiA9XG4gICAgICAxMDAgKiAoc2hpZnRYIC8gdGhpcy5EZXNrdG9wUHJvZ3Jlc3NCYXJUcmFjay5vZmZzZXRXaWR0aCk7XG4gICAgbGV0IG5ld1Byb2dyZXNzQmFyUG9zaXRpb24gPSBuZXdCdXR0b25Qb3NpdGlvbiAtIDEwMDtcblxuICAgIGlmIChuZXdCdXR0b25Qb3NpdGlvbiA+IDEwMCkge1xuICAgICAgdGhpcy5EZXNrdG9wUHJvZ3Jlc3NCYXJCdXR0b24uc3R5bGUubGVmdCA9IGAkezEwMH0lYDtcbiAgICAgIHRoaXMuRGVza3RvcFByb2dyZXNzQmFyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7MH0lKWA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5ld0J1dHRvblBvc2l0aW9uIDwgMCkge1xuICAgICAgdGhpcy5EZXNrdG9wUHJvZ3Jlc3NCYXJCdXR0b24uc3R5bGUubGVmdCA9IGAkezB9JWA7XG4gICAgICB0aGlzLkRlc2t0b3BQcm9ncmVzc0Jhci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgkey0xMDB9JSlgO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5EZXNrdG9wUHJvZ3Jlc3NCYXJCdXR0b24uc3R5bGUubGVmdCA9IGAke25ld0J1dHRvblBvc2l0aW9ufSVgO1xuICAgIHRoaXMuRGVza3RvcFByb2dyZXNzQmFyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7bmV3UHJvZ3Jlc3NCYXJQb3NpdGlvbn0lKWA7XG4gICAgcmV0dXJuO1xuICB9O1xuXG4gIG1vdXNlVXAgPSAoZSkgPT4ge1xuICAgIGlmICh0aGlzLm1vdmluZykge1xuICAgICAgdGhpcy5tb3ZlcGxheWhlYWQoZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm1vdmVwbGF5aGVhZCwgdHJ1ZSk7XG5cbiAgICAgIGxldCBidXR0b25Qb3NpdGlvbkluUGVyY2VudCA9IHRoaXMuRGVza3RvcFByb2dyZXNzQmFyQnV0dG9uLnN0eWxlLmxlZnQ7XG5cbiAgICAgIGxldCBwZXJjZW50RGVjaSA9IGJ1dHRvblBvc2l0aW9uSW5QZXJjZW50LnN1YnN0cmluZyhcbiAgICAgICAgMCxcbiAgICAgICAgYnV0dG9uUG9zaXRpb25JblBlcmNlbnQubGVuZ3RoIC0gMSxcbiAgICAgICk7XG4gICAgICBwZXJjZW50RGVjaSA9IHBlcmNlbnREZWNpIC8gMTAwO1xuICAgICAgbGV0IG5ld0N1cnJlbnRUaW1lID0gdGhpcy5jdXJyZW50U29uZy5kdXJhdGlvbiAqIHBlcmNlbnREZWNpO1xuICAgICAgbmV3Q3VycmVudFRpbWUgPSBuZXdDdXJyZW50VGltZS50b0ZpeGVkKDApO1xuICAgICAgbmV3Q3VycmVudFRpbWUgPSBuZXdDdXJyZW50VGltZSAvIDEwMDA7XG4gICAgICB0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lID0gbmV3Q3VycmVudFRpbWU7XG4gICAgICB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCB0aGlzLnRpbWVVcGRhdGUsIGZhbHNlKTtcbiAgICB9XG5cbiAgICB0aGlzLm1vdmluZyA9IGZhbHNlO1xuICB9O1xuXG4gIHRvdWNocGxheWhlYWQgPSAoZSkgPT4ge1xuICAgIHRoaXMuYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIHRoaXMudGltZVVwZGF0ZSwgZmFsc2UpO1xuXG4gICAgbGV0IG5ld0NsaWVudDtcbiAgICBpZiAoZS50b3VjaGVzWzBdLmNsaWVudFgpIHtcbiAgICAgIG5ld0NsaWVudCA9XG4gICAgICAgIGUudG91Y2hlc1swXS5jbGllbnRYIC1cbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhclRyYWNrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgfVxuXG4gICAgaWYgKGUuY2xpZW50WCkge1xuICAgICAgbmV3Q2xpZW50ID1cbiAgICAgICAgZS5jbGllbnRYIC0gdGhpcy5wcm9ncmVzc0JhclRyYWNrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgfVxuXG4gICAgbGV0IG5ld2J1dHRvbiA9IDEwMCAqIChuZXdDbGllbnQgLyB0aGlzLnByb2dyZXNzQmFyVHJhY2sub2Zmc2V0V2lkdGgpO1xuICAgIGxldCBuZXdwcm9ncmVzcyA9IG5ld2J1dHRvbiAtIDEwMDtcblxuICAgIGlmIChuZXdidXR0b24gPiAxMDApIHtcbiAgICAgIHRoaXMucHJvZ3Jlc3NCYXJCdXR0b24uc3R5bGUubGVmdCA9IGAkezEwMH0lYDtcbiAgICAgIHRoaXMucHJvZ3Jlc3NCYXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHswfSUpYDtcblxuICAgICAgdGhpcy5taW5pUHJvZ3Jlc3NCYXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHswfSUpYDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobmV3YnV0dG9uIDwgMCkge1xuICAgICAgdGhpcy5wcm9ncmVzc0JhckJ1dHRvbi5zdHlsZS5sZWZ0ID0gYCR7MH0lYDtcbiAgICAgIHRoaXMucHJvZ3Jlc3NCYXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHstMTAwfSUpYDtcblxuICAgICAgdGhpcy5taW5pUHJvZ3Jlc3NCYXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHstMTAwfSUpYDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnByb2dyZXNzQmFyQnV0dG9uLnN0eWxlLmxlZnQgPSBgJHtuZXdidXR0b259JWA7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke25ld3Byb2dyZXNzfSUpYDtcblxuICAgIHRoaXMubWluaVByb2dyZXNzQmFyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7bmV3cHJvZ3Jlc3N9JSlgO1xuICAgIHJldHVybjtcbiAgfTtcblxuICB0aW1lVXBkYXRlID0gKCkgPT4ge1xuICAgIGxldCBidXR0b25QZXJjZW50ID1cbiAgICAgIDEwMDAwMCAqICh0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lIC8gdGhpcy5jdXJyZW50U29uZy5kdXJhdGlvbik7XG4gICAgbGV0IHRyYWNrUGVyY2VudCA9IGJ1dHRvblBlcmNlbnQgLSAxMDA7XG4gICAgdGhpcy5wcm9ncmVzc0JhckJ1dHRvbi5zdHlsZS5sZWZ0ID0gYCR7YnV0dG9uUGVyY2VudH0lYDtcbiAgICB0aGlzLnByb2dyZXNzQmFyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dHJhY2tQZXJjZW50fSUpYDtcblxuICAgIHRoaXMuRGVza3RvcFByb2dyZXNzQmFyQnV0dG9uLnN0eWxlLmxlZnQgPSBgJHtidXR0b25QZXJjZW50fSVgO1xuICAgIHRoaXMuRGVza3RvcFByb2dyZXNzQmFyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dHJhY2tQZXJjZW50fSUpYDtcblxuICAgIHRoaXMubWluaVByb2dyZXNzQmFyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dHJhY2tQZXJjZW50fSUpYDtcbiAgfTtcblxuICBlbmRUb3VjaCA9ICgpID0+IHtcbiAgICBsZXQgYnV0dG9uUG9zaXRpb25JblBlcmNlbnQgPSB0aGlzLnByb2dyZXNzQmFyQnV0dG9uLnN0eWxlLmxlZnQ7XG5cbiAgICBsZXQgcGVyY2VudERlY2kgPSBidXR0b25Qb3NpdGlvbkluUGVyY2VudC5zdWJzdHJpbmcoXG4gICAgICAwLFxuICAgICAgYnV0dG9uUG9zaXRpb25JblBlcmNlbnQubGVuZ3RoIC0gMSxcbiAgICApO1xuICAgIHBlcmNlbnREZWNpID0gcGVyY2VudERlY2kgLyAxMDA7XG4gICAgbGV0IG5ld0N1cnJlbnRUaW1lID0gdGhpcy5jdXJyZW50U29uZy5kdXJhdGlvbiAqIHBlcmNlbnREZWNpO1xuICAgIG5ld0N1cnJlbnRUaW1lID0gbmV3Q3VycmVudFRpbWUudG9GaXhlZCgwKTtcbiAgICBuZXdDdXJyZW50VGltZSA9IG5ld0N1cnJlbnRUaW1lIC8gMTAwMDtcbiAgICB0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lID0gbmV3Q3VycmVudFRpbWU7XG4gICAgdGhpcy5hdWRpby5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgdGhpcy50aW1lVXBkYXRlLCBmYWxzZSk7XG4gIH07XG5cbiAgcGxheSgpIHtcbiAgICBpZiAodGhpcy5wbGF5aW5nKSB7XG4gICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuYXVkaW8ucGF1c2UoKTtcbiAgICAgIHRoaXMuc2hvd1BsYXkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuYXVkaW8ucGxheSgpO1xuICAgICAgdGhpcy5zaG93UGF1c2UoKTtcbiAgICAgIHRoaXMudXBkYXRlUGFuZWwoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVQYW5lbCgpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50U29uZy5pZCAhPT0gdGhpcy5wcmV2aW91c1NvbmdJZCkge1xuICAgICAgbGV0IGN1cnJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmN1cnJlbnRTb25nLmlkKTtcbiAgICAgIGN1cnJlbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgIGN1cnJlbnQuc3R5bGUuY29sb3IgPSAnIzA1YWVhNSc7XG5cbiAgICAgIGxldCBwcmV2aW91cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucHJldmlvdXNTb25nSWQpO1xuICAgICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICAgIHByZXZpb3VzLnN0eWxlLmZvbnRXZWlnaHQgPSAnbm9ybWFsJztcbiAgICAgICAgcHJldmlvdXMuc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVBsYXllcihuZXdTb25nKSB7XG4gICAgdGhpcy5hdWRpby5zcmMgPSBuZXdTb25nLm11c2ljU3JjO1xuXG4gICAgZm9yIChsZXQgZSBvZiB0aGlzLnBsYXllclRpdGxlKSB7XG4gICAgICBlLmlubmVySFRNTCA9IG5ld1NvbmcudGl0bGU7XG4gICAgfVxuICAgIC8vIGZvciAobGV0IHMgb2YgdGhpcy5wbGF5ZXJTaW5nZXIpIHtcbiAgICAvLyAgIHMuaW5uZXJIVE1MID0gbmV3U29uZy5zaW5nZXI7XG4gICAgLy8gfVxuICAgIGZvciAobGV0IGkgb2YgdGhpcy5wbGF5ZXJDb3Zlcikge1xuICAgICAgaS5zcmMgPSBuZXdTb25nLmNvdmVyO1xuICAgIH1cblxuICAgIHRoaXMuY3VycmVudFNvbmcgPSBuZXdTb25nO1xuICB9XG5cbiAgdXBkYXRlUGxheWxpc3RQYW5lbCgpIHtcbiAgICBsZXQgdGVtcCwgaXRlbSwgYSwgaTtcbiAgICBsZXQgcGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXAnKTtcbiAgICB0ZW1wID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RlbXBsYXRlJylbMF07XG4gICAgaXRlbSA9IHRlbXAuY29udGVudC5xdWVyeVNlbGVjdG9yKCdkaXYnKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5wbGF5bGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgLy9DcmVhdGUgYSBuZXcgbm9kZSwgYmFzZWQgb24gdGhlIHRlbXBsYXRlOlxuICAgICAgYSA9IGRvY3VtZW50LmltcG9ydE5vZGUoaXRlbSwgdHJ1ZSk7XG5cbiAgICAgIGEuaWQgPSBpO1xuICAgICAgYS5zZXRBdHRyaWJ1dGUoJ29uY2xpY2snLCBgRVRQbGF5ZXIucGxheU5vdygke3RoaXMucGxheWxpc3RbaV0uaWR9KWApO1xuXG4gICAgICBsZXQgcGxheWxpc3RJbWcgPSBhLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuICAgICAgcGxheWxpc3RJbWcuc3JjID0gdGhpcy5wbGF5bGlzdFtpXS5jb3ZlcjtcblxuICAgICAgbGV0IHBsYXlsaXN0VGl0bGUgPSBhLnF1ZXJ5U2VsZWN0b3IoJ3AnKTtcbiAgICAgIHBsYXlsaXN0VGl0bGUuaW5uZXJIVE1MID0gYCR7dGhpcy5wbGF5bGlzdFtpXS50aXRsZX1gO1xuXG4gICAgICBwbGlzdC5hcHBlbmRDaGlsZChhKTtcbiAgICB9XG4gIH1cblxuICBzaG93UGF1c2UoKSB7XG4gICAgZm9yIChsZXQgYiBvZiB0aGlzLnBsYXlCdXR0b25zKSB7XG4gICAgICBiLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLXBsYXknKTtcbiAgICAgIGIuY2xhc3NMaXN0LmFkZCgnZmEtcGF1c2UnKTtcbiAgICB9XG4gIH1cblxuICBzaG93UGxheSgpIHtcbiAgICBmb3IgKGxldCBiIG9mIHRoaXMucGxheUJ1dHRvbnMpIHtcbiAgICAgIGIuY2xhc3NMaXN0LnJlbW92ZSgnZmEtcGF1c2UnKTtcbiAgICAgIGIuY2xhc3NMaXN0LmFkZCgnZmEtcGxheScpO1xuICAgIH1cbiAgfVxuXG4gIHBsYXlOb3coaWQpIHtcbiAgICB0aGlzLnByZXZpb3VzU29uZ0lkID0gdGhpcy5jdXJyZW50U29uZy5pZDtcblxuICAgIHRoaXMudXBkYXRlUGxheWVyKHRoaXMucGxheWxpc3RbaWRdKTtcbiAgICB0aGlzLnVwZGF0ZVBhbmVsKCk7XG4gICAgdGhpcy5zaG93UGF1c2UoKTtcblxuICAgIHRoaXMuYXVkaW8ucGxheSgpO1xuICAgIHRoaXMucGxheWluZyA9IHRydWU7XG4gIH1cblxuICBuZXh0KCkge1xuICAgIHRoaXMucHJldmlvdXNTb25nSWQgPSB0aGlzLmN1cnJlbnRTb25nLmlkO1xuICAgIGxldCBuZXh0ID0gdGhpcy5jdXJyZW50U29uZy5pZCArIDE7XG5cbiAgICBpZiAodGhpcy5wbGF5bGlzdC5sZW5ndGggPT09IG5leHQpIHtcbiAgICAgIG5leHQgPSAwO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlUGxheWVyKHRoaXMucGxheWxpc3RbbmV4dF0pO1xuICAgIHRoaXMudXBkYXRlUGFuZWwoKTtcbiAgICB0aGlzLnNob3dQYXVzZSgpO1xuXG4gICAgdGhpcy5hdWRpby5wbGF5KCk7XG4gICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTtcbiAgfVxuXG4gIHByZXYoKSB7XG4gICAgdGhpcy5wcmV2aW91c1NvbmdJZCA9IHRoaXMuY3VycmVudFNvbmcuaWQ7XG4gICAgbGV0IHByZXYgPSB0aGlzLmN1cnJlbnRTb25nLmlkIC0gMTtcblxuICAgIGlmIChwcmV2IDwgMCkge1xuICAgICAgcHJldiA9IHRoaXMucGxheWxpc3QubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVBsYXllcih0aGlzLnBsYXlsaXN0W3ByZXZdKTtcbiAgICB0aGlzLnVwZGF0ZVBhbmVsKCk7XG4gICAgdGhpcy5zaG93UGF1c2UoKTtcblxuICAgIHRoaXMuYXVkaW8ucGxheSgpO1xuICAgIHRoaXMucGxheWluZyA9IHRydWU7XG4gIH1cblxuICB0b2dnbGVNb2JpbGVMaXN0KCkge1xuICAgIGlmICh0aGlzLmZ1bGxNb2JpbGVMaXN0U2hvdykge1xuICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgJycsICcvaW5kZXguaHRtbCNwbGF5ZXInKTtcbiAgICAgIHRoaXMuZnVsbFBsYXlsaXN0UGFuZWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMTAwdmgpJztcbiAgICAgIHRoaXMuZnVsbE1vYmlsZUxpc3RTaG93ID0gIXRoaXMuZnVsbE1vYmlsZUxpc3RTaG93O1xuICAgIH0gZWxzZSB7XG4gICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnJywgJy9pbmRleC5odG1sI3BsYXlsaXN0Jyk7XG4gICAgICB0aGlzLmZ1bGxQbGF5bGlzdFBhbmVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcbiAgICAgIHRoaXMuZnVsbE1vYmlsZUxpc3RTaG93ID0gIXRoaXMuZnVsbE1vYmlsZUxpc3RTaG93O1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZU1vYmlsZVBsYXllcigpIHtcbiAgICBpZiAodGhpcy5mdWxsTW9iaWxlUGxheWVyU2hvdykge1xuICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgJycsICcvaW5kZXguaHRtbCcpO1xuICAgICAgdGhpcy5taW5pUGxheWVyLnN0eWxlLnRyYW5zaXRpb25EZWxheSA9ICczNTBtcyc7XG4gICAgICB0aGlzLm1pbmlQbGF5ZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICAgICAgdGhpcy5mdWxsUGxheWVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDIwMHZoKSc7XG4gICAgICB0aGlzLmZ1bGxNb2JpbGVQbGF5ZXJTaG93ID0gIXRoaXMuZnVsbE1vYmlsZVBsYXllclNob3c7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsICcnLCAnL2luZGV4Lmh0bWwjcGxheWVyJyk7XG4gICAgICB0aGlzLm1pbmlQbGF5ZXIuc3R5bGUudHJhbnNpdGlvbkRlbGF5ID0gJzBtcyc7XG4gICAgICB0aGlzLm1pbmlQbGF5ZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMTYwcHgpJztcbiAgICAgIHRoaXMuZnVsbFBsYXllci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSc7XG4gICAgICB0aGlzLmZ1bGxNb2JpbGVQbGF5ZXJTaG93ID0gIXRoaXMuZnVsbE1vYmlsZVBsYXllclNob3c7XG4gICAgfVxuICB9XG5cbiAgc2V0Vm9sdW1lID0gKGUpID0+IHtcbiAgICB0aGlzLmF1ZGlvLnZvbHVtZSA9IGUudGFyZ2V0LnZhbHVlIC8gMTAwO1xuICB9O1xufVxuXG5jb25zdCBFVFBsYXllciA9IG5ldyBFVEF1ZGlvUGxheWVyKCk7XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIEVUUGxheWVyLm1pbmlQbGF5ZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnJywgJy9pbmRleC5odG1sJyk7XG59O1xuXG53aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKEVUUGxheWVyLmZ1bGxNb2JpbGVMaXN0U2hvdyAmJiBFVFBsYXllci5mdWxsTW9iaWxlUGxheWVyU2hvdykge1xuICAgIEVUUGxheWVyLnRvZ2dsZU1vYmlsZUxpc3QoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIUVUUGxheWVyLmZ1bGxNb2JpbGVMaXN0U2hvdyAmJiBFVFBsYXllci5mdWxsTW9iaWxlUGxheWVyU2hvdykge1xuICAgIEVUUGxheWVyLnRvZ2dsZU1vYmlsZVBsYXllcigpO1xuICAgIHJldHVybjtcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQXNJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMUlBO0FBNElBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQWhKQTtBQWtKQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFLQTtBQTRLQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoTUE7QUFrTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQXpPQTtBQTJPQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUF0UEE7QUF3UEE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQXJRQTtBQTZaQTtBQUNBO0FBQ0E7QUE5WkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBSUE7QUFFQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUlBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFDQTs7O0FBbUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFUQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQVNBO0FBQUE7QUFDQTtBQUNBO0FBWEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBWUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7OztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')}]);