<!DOCTYPE html>
<html>

<head>
  <title>Page Title</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="css/reset.css" rel="stylesheet" />
  <link href="css/main.css" rel="stylesheet" />
</head>

<body>
  <section class="small-mobile-player" id="smp">
    <i class="fa fa-angle-up" style="font-size: 92px; margin-left: 32px;" onclick="toggleMobilePlayer()"></i>
    <div style="font-size: 64px;">
      <p class="player-title"></p>
      <p class="player-singer"></p>
    </div>
    <i class="fa fa-play" style="font-size: 64px; margin-right: 32px;"></i>
  </section>

  <section class="full-mobile-player" id="fmp">

    <div class="fmp-img-container">
      <img class="fmp-img" src="/images/filler.jpg" />
    </div>

    <div class="fmp-controls-container">

      <div class="fmp-controls-title">
        <p class="player-title"></p>
        <p class="player-singer"></p>
      </div>

      <div class="fmp-controls-slider">
        <input type="range" min="1" max="100" value="50">
      </div>

      <div class="fmp-controls-player">
        <i class="fa fa-step-backward" style="font-size: 64px;"></i>
        <i class="fa fa-play" style="font-size: 64px;"></i>
        <i class="fa fa-step-forward" style="font-size: 64px;"></i>
      </div>

    </div>

    <div class="fmp-navigation">
      <i class="fa fa-angle-down" style="font-size: 92px; margin-left: 32px;" onclick="toggleMobilePlayer()"></i>
      <i class="fa fa-list" style="font-size: 64px; margin-right: 32px;"></i>
    </div>

  </section>
</body>
<script src="https://connect.soundcloud.com/sdk/sdk-3.3.2.js"></script>
<script>
  var fullMobilePlayerShow = false;
  var smp = document.getElementById("smp");
  var fmp = document.getElementById("fmp");
  var playlist = [];
  var playing = true;
  var loading = false;

  SC.initialize({
    client_id: 'qar87rq7vEGGfgjM0PqrmTBUYhSzUcQ5',
    redirect_uri: 'https://example.com/callback'
  });

  SC.get(`playlists/1064225653`).then(({ tracks }) => {

    //https://i1.sndcdn.com/artworks-ZbHh7Lw12V8bgTEF-GKcmIg-t500x500.jpg
    tracks.forEach((song) => {
      let me = song.title.split('-')
      let singer = me[0].trim();
      let title = me[1].trim();

      playlist.push({
        title: title,
        singer: singer,
        cover: song.artwork_url.replace('large', 't500x500'),
        musicSrc: `${song.stream_url}?client_id=qar87rq7vEGGfgjM0PqrmTBUYhSzUcQ5`,
      });
    })
    initPlayer()
  });


  function initPlayer() {
    let titles = document.getElementsByClassName('player-title');
    let singer = document.getElementsByClassName('player-singer');
    let imgs = document.getElementsByClassName('fmp-img');

    for (e of titles) {
      e.innerHTML = playlist[2].title

    }
    for (s of singer) {
      s.innerHTML = playlist[2].singer
    }

    for (i of imgs) {
      i.src = playlist[2].cover
    }
  }

  function toggleMobilePlayer() {
    if (fullMobilePlayerShow) {
      smp.style.transitionDelay = "350ms"
      smp.style.transform = "translateY(0)"
      fmp.style.transform = "translateY(100vh)"
      fullMobilePlayerShow = !fullMobilePlayerShow
    } else {
      smp.style.transitionDelay = "0ms"
      smp.style.transform = "translateY(151px)"
      fmp.style.transform = "translateY(0)"
      fullMobilePlayerShow = !fullMobilePlayerShow
    }
  }

  window.onload = function () {
    smp.style.transform = "translateY(0)"
  }
</script>

</html>